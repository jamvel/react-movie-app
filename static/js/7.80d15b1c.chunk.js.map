{"version":3,"sources":["routes/MoviesByGenre/index.js","components/MovieCard/index.js","stores/movies/actions.js","components/MovieList/index.js"],"names":["connect","state","ownProps","listObject","get","id","config","title","find","g","toString","dispatch","fetchDataCallback","getGenreMovieList","props","MovieCardParent","styled","div","StyledImg","img","data","imagesConfig","movie","secureBaseUrl","posterSize","history","useHistory","onClick","push","src","getList","isGenre","getState","a","undefined","Error","movies","lists","currentPageIndex","index","listId","type","INIT_FETCH_LIST","payload","genre","pageIndex","list","results","map","SET_LIST","page","SET_MOVIES","console","log","ERROR_FETCH_LIST","getPopularList","getPopular","getTopRatedList","getTopRated","getNowPlayingList","getNowPlaying","genreId","getFromGenre","MovieCardContainer","TitleContainer","theme","secondary","breakpoints","xs","ButtonWrapper","Button","button","MovieList","useEffect","isLoading","length","key","disabled","color","text","isError"],"mappings":"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","file":"static/js/7.80d15b1c.chunk.js","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux';\nimport get from 'lodash.get';\nimport MovieList from 'components/MovieList';\nimport { getGenreMovieList } from 'stores/movies/actions';\n\n/**\n * HOC component to show a Genre\n * @name Route/Genre\n * @component\n * @param {...Object} props - Same props as MovieList component since this is just a Wrapper \n */\nconst Genre = props => (\n    <MovieList {...props} />\n)\n\nexport default connect((state, ownProps) => {\n    const listObject = get(state, `movies.lists.genre/${ownProps.id}`);\n    const config = get(state, 'config');\n\n    // fetch the title from config after config is loaded\n    let title = null;\n    if(config && 'genres' in config){\n        title = get(config['genres'].find(g => g.id.toString() === ownProps.id), 'name') || null\n        if(title){\n            title = `${title} Genre`\n        }\n    }\n\n    return {\n        listObject: listObject || null,\n        config,\n        title,\n    }\n}, (dispatch, ownProps) => ({\n    fetchDataCallback: () => dispatch(getGenreMovieList(ownProps.id)),\n}))(Genre);;","import React from 'react';\nimport { connect } from 'react-redux';\nimport get from 'lodash.get';\nimport styled from 'styled-components';\nimport { useHistory } from 'react-router-dom';\n\nconst MovieCardParent = styled.div`\n    position: relative;\n    flex: 0 0 17%;\n    display: flex;\n    justify-content: space-around;\n    margin: 1em;\n    transition: transform 0.3s ease;\n    color: white;\n\n    :hover {\n        cursor: pointer;\n        transform: scale(1.1);\n        z-index: 2;\n    }\n\n    @media screen and (max-width: 1440px) {\n        flex: 1 0 15%;\n    }\n    @media screen and (max-width: 720px) {\n        flex: 0 0 25%;\n    }\n    @media screen and (max-width: 540px) {\n        flex: 1 0 33%;\n    }\n`\n\nconst StyledImg = styled.img`\n    width: 100%;\n    height: 100%;\n`;\n\n/**\n * @name MovieCard\n * @component\n * @param {Object} movie - The movie Object containing the data\n * @param {string} secureBaseUrl - URL to fetch the asset\n * @param {string} posterSize - Size of poster image \n */\nconst MovieCard = ({ movie, secureBaseUrl, posterSize }) => {\n    const history = useHistory();\n    return (\n        <>\n            {/* check that movie is defined in state before rendering */}\n            {movie && (\n                <MovieCardParent onClick={() => history.push(`/movie/${get(movie, 'id')}`)}>\n                <StyledImg\n                    src={`${secureBaseUrl}${posterSize}/${get(movie, 'poster_path')}`}\n                />\n                </MovieCardParent>\n            )}\n        </>\n    )\n}\n\nconst mapStateToProps = (state, props) => {\n    const data = get(state, 'movies.data');\n    const imagesConfig = get(state, 'config.images');\n    \n    return {\n        movie: props.movie || data[props.id] || null,\n        secureBaseUrl: get(imagesConfig, 'secure_base_url'),\n        posterSize: get(imagesConfig, 'poster_sizes[3]')\n    }\n}\n\nexport default connect(mapStateToProps, null)(MovieCard)\n","import get from 'lodash.get';\nimport { SET_MOVIE, SET_MOVIES, INIT_FETCH_LIST, SET_LIST, ERROR_FETCH_LIST } from './types';\nimport { getPopular, getTopRated, getNowPlaying, getFromGenre } from 'api';\n\nexport const setMovie = movie => dispatch => {\n    dispatch({\n        type: SET_MOVIE,\n        payload: {\n            ...movie\n        },\n    })\n}\n\nexport const setMovies = movies => dispatch => {\n    dispatch({\n        type: SET_MOVIES,\n        payload: {\n            movies: movies\n        },\n    })\n}\n\n/**\n * A function to create and update all movie lists within the application\n * Acts as a wrapper to create a Thunk\n * @param {string} id - List id \n * @param {Function} fetchDataCallback - Callback function that obtains data from the API\n * @param {boolean} isGenre - Boolean to indicate whether a movie list is a Genre\n */\nexport const getList = ({ id, fetchDataCallback, isGenre } = {}) => async (dispatch, getState) => {\n    // PARAMS must be provided - throw error outside catch as an unrecoverable error\n    if(id === undefined){\n        throw new Error('Missing List ID in getList Action')\n    }\n\n    if(fetchDataCallback === undefined){\n        throw new Error('Missing List callback in getList Action')\n    }\n\n    const state = getState().movies;\n    const listObject = isGenre ? get(state.lists, `genre/${id}`) : get(state.lists, id) \n    const currentPageIndex = listObject ? listObject.index : 0\n\n    const listId = isGenre ? `genre/${id}` : id;\n\n    try {\n        dispatch({\n            type: INIT_FETCH_LIST,\n            payload:{\n                id: listId\n            }\n        })\n\n        const data = await fetchDataCallback({\n            ...isGenre && { genre: id },\n            pageIndex: currentPageIndex + 1\n        })\n\n        const list = data.results.map(movie => movie.id)\n\n        dispatch({\n            type: SET_LIST,\n            payload: {\n                id: listId,\n                list: list,\n                index: data.page\n            },\n        })\n\n        dispatch({\n            type: SET_MOVIES,\n            payload: {\n                movies: data.results\n            }\n        })\n    } catch(e){\n        console.log(e)\n        dispatch({\n            type: ERROR_FETCH_LIST,\n            payload: {\n                id: listId,\n                index: currentPageIndex\n            }\n        })\n    }\n};\n\nexport const getPopularList = () => getList({ id: 'popular', fetchDataCallback: getPopular })\nexport const getTopRatedList = () => getList({ id: 'topRated', fetchDataCallback: getTopRated })\nexport const getNowPlayingList = () => getList({ id: 'nowPlaying', fetchDataCallback: getNowPlaying })\nexport const getGenreMovieList = genreId => getList({ isGenre: true, id: genreId, fetchDataCallback: getFromGenre })","import React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport theme from 'helpers/theme';\nimport Card from 'components/MovieCard';\nimport Loader from 'components/Loader';\nimport Error from 'components/Error';\n\nconst MovieCardContainer = styled.div`\n    display: flex;\n    flex-flow: row wrap;\n    padding: 0.1em;\n    justify-content: center;\n\n    :focus {\n        outline: none;\n        border: none;\n    }\n    @media screen and (max-width: 1140px) {\n        padding: 1.5em;\n    }\n    @media screen and (max-width: 992px) {\n        padding: 1em 0.65em;\n    }\n    @media screen and (max-width: 768px) {\n        padding: 0.35em;\n    }\n    @media screen and (max-width: 576px) {\n        padding: 0.1em;\n    }\n`;\n\nconst TitleContainer = styled.div`\n    color: ${({ theme }) => theme.secondary};\n    font-size: 1.6em;\n    padding-left: 0.6em;\n    width: 100%;\n    font-weight: bold;\n    border-bottom: 1px solid ${({ theme }) => theme.secondary};\n\n    @media (max-width: ${({ theme }) => theme.breakpoints.xs}) {\n        font-size: 1.4em;\n        margin-top: .5em;\n    }\n`\n\nconst ButtonWrapper = styled.div`\n    display: flex;\n    justify-content: center;\n`\n\nconst Button = styled.button`\n    display: flex;\n    height: 60px;\n    align-items: center;\n    background: transparent;\n    border: 1px solid ${({ theme }) => theme.secondary};\n    padding: 1.3em;\n    margin: 1em 0 3em 0;\n    color: white;\n    border-radius: 1em;\n    font-weight: bold;\n    cursor: pointer;\n`\n\n/**\n * Movie List Component that fetches data and then displays a MovieCard list\n * \n * @component\n * @param {Object} listObject - List Object containing different properties\n * @param {boolean} listObject.isLoading - ListObject property that shows whether data for a given list is being fetched\n * @param {boolean} listObject.isError - ListObject property that shows whether or not there was an error during data fetch\n * @param {number[]} listObject.list - ListObject property that contains a list of movie ids\n * @param {Object} config - Config Object containing different properties\n * @param {boolean} config.isLoading - Config property that shows whether the config data is being fetched\n * @param {Function} fetchDataCallback - Redux Action that performs the data fetch for a given list\n * @param {string} title - Title of List\n */\nconst MovieList = ({ listObject, fetchDataCallback, config, title }) => {\n    /**\n     * Initialise data on mount by calling fetchDataCallback action\n     */\n    useEffect(() => {\n        // only dispatch action if list object is not in store\n        if(!listObject){\n            fetchDataCallback()\n        }\n    }, [listObject, fetchDataCallback])\n\n    const handleClick = () => {\n        fetchDataCallback();\n    }\n    \n    return (\n        <>\n            <TitleContainer>{title}</TitleContainer>\n            {listObject && 'list' in listObject && config && !config.isLoading && listObject.list.length > 0 &&(\n                <>\n                    <MovieCardContainer>\n                        {listObject.list && listObject.list.map(id => (\n                            <Card id={id} key={id} />\n                        ))}\n                    </MovieCardContainer>\n                    <ButtonWrapper>\n                        <Button onClick={() => handleClick()} disabled={listObject.isLoading}>\n                            {listObject.isLoading ? <Loader color={theme.secondary} /> : 'Fetch More'}\n                        </Button>\n                    </ButtonWrapper>\n                </>\n            )}\n\n            {listObject && config && (listObject.isLoading || config.isLoading) && !listObject.list &&(\n                <Loader color={theme.secondary} />\n            )}\n\n            {listObject && config && !listObject.isLoading && !config.isLoading && listObject.list.length <= 0 && (\n                <Error text={'Could Not Find List'} />\n            )}\n\n            {listObject && listObject.isError && (\n                <Error text={'Something went wrong :('} />\n            )}\n        </>\n)}\n\nexport default MovieList;"],"sourceRoot":""}